var locate={mdiCityID:95,mdiZipID:101,mdiURL:"/masterindex/search.json"};locate.mdiUpdateBtn=$(".check-in"),locate.mdiManualUpdateBtn=$(".check-in-m"),locate.mdiManualUpdateData=$(".check-in-mdata"),locate.mdiManualData="",locate.status="initial",locate.gettimer=4e3,locate.gettimeout="",locate.isStored="",locate.isDefault="",locate.isOOS="",locate.init=function(){sessionStorage.getItem("mdiCity")&&sessionStorage.getItem("deviceLat")&&sessionStorage.getItem("deviceLng")?(locate.mdiCity=sessionStorage.getItem("mdiCity"),locate.mdiZip=sessionStorage.getItem("mdiZip"),locate.deviceLat=sessionStorage.getItem("deviceLat"),locate.deviceLng=sessionStorage.getItem("deviceLng"),locate.isOOS=sessionStorage.getItem("isOOS"),locate.isOOS=JSON.parse(locate.isOOS),locate.isStored=!0,locate.isDefault=!1):(locate.mdiCity="Salt Lake City",locate.mdiZip="84111",locate.deviceLat="40.756",locate.deviceLng="-111.883",locate.isOOS=!1,locate.isStored=!1,locate.isDefault=!0),locate.getLocation()},locate.getLocation=function(type){if(locate.dataOutput("loading"),"man"==type)locate.mdiReverseGeo(locate.mdiManualData);else if(1==locate.isStored)locate.dataOutput("done"),locate.consoleOut();else if(0==locate.isStored&&(1==locate.isDefault&&locate.dataOutput("default"),0==locate.isDefault&&locate.dataOutput("loading"),navigator.geolocation)){navigator.geolocation.getCurrentPosition(locate.mdiPosQuery,locate.displayError,{enableHighAccuracy:!1,timeout:1e7,maximumAge:0})}},locate.mdiPosQuery=function(position){locate.dataOutput("loading"),locate.isDefault=!1,position&&(locate.deviceLat=position.coords.latitude),position&&(locate.deviceLng=position.coords.longitude),locate.mdiCity="",locate.mdiZip="",$.getJSON(locate.mdiURL,{typeIds:locate.mdiCityID,latitude:locate.deviceLat,longitude:locate.deviceLng,radius:100,limit:1},function(data){0!=data.totalCount?(locate.mdiCity=data.results[0].name,locate.isOOS=!1,locate.callsComplete()):0==data.totalCount&&(locate.mdiCity="Salt Lake City",locate.isOOS=!0,locate.callsComplete())}),$.getJSON(locate.mdiURL,{typeIds:locate.mdiZipID,latitude:locate.deviceLat,longitude:locate.deviceLng,radius:100,limit:1},function(data){0!=data.totalCount?(locate.mdiZip=data.results[0].name,locate.isOOS=!1,locate.callsComplete()):0==data.totalCount&&(locate.mdiZip="84111",locate.isOOS=!0,locate.callsComplete())})},locate.mdiReverseGeo=function(mdata){"zip"==locate.determineZipOrCity(mdata)?$.getJSON(locate.mdiURL,{typeIds:locate.mdiZipID,keyword:mdata,limit:1},function(data){if(0!=data.totalCount){locate.deviceLat=data.results[0].location.latitude,locate.deviceLng=data.results[0].location.longitude;locate.mdiPosQuery(!1)}else 0==data.totalCount&&(locate.mdiCity="Salt Lake City",locate.mdiZip="84111",locate.isOOS=!0,locate.callsComplete())}):"city"==locate.determineZipOrCity(mdata)&&$.getJSON(locate.mdiURL,{typeIds:locate.mdiCityID,keyword:mdata,limit:1},function(data){if(0!=data.totalCount){locate.deviceLat=data.results[0].location.latitude,locate.deviceLng=data.results[0].location.longitude;locate.mdiPosQuery(!1)}else 0==data.totalCount&&(locate.mdiCity="Salt Lake City",locate.mdiZip="84111",locate.isOOS=!0,locate.callsComplete())})},locate.determineZipOrCity=function(data){return isFinite(data)&&""!=data&&5==data.length?"zip":isFinite(location)&&""!=location?"invalid":"city"},locate.callsComplete=function(){locate.mdiCity&&locate.mdiZip&&(locate.isOOS?locate.isOOS&&(locate.deviceLat="40.756",locate.deviceLng="-111.883",locate.setStoreLocation("success"),locate.dataOutput("done"),locate.consoleOut()):(locate.setStoreLocation("success"),locate.dataOutput("done"),locate.consoleOut()))},locate.displayError=function(error){locate.setStoreLocation("error"),locate.dataOutput("default")},locate.dataOutput=function(type){"default"==type&&($("[data-locate=city]").each(function(i){$(this).html('<span class="showing-default">(Showing) </span>'+locate.mdiCity)}),$("[data-locate=zip]").each(function(i){$(this).text(locate.mdiZip)}),$("[data-locate=lat]").each(function(i){$(this).text(locate.deviceLat)}),$("[data-locate=lng]").each(function(i){$(this).text(locate.deviceLng)}),$("[data-locate=latlng]").each(function(i){var locateOut=locate.deviceLat+","+locate.deviceLng;$(this).text(locateOut)}),$("[data-locate=all]").each(function(i){var locateOut=locate.deviceLat+","+locate.deviceLng+","+locate.mdiCity;$(this).text(locateOut)}),locate.reloadapps()),"done"==type&&(locate.isOOS?locate.isOOS&&$("[data-locate=city]").each(function(i){$(this).html(locate.mdiCity+'<span class="showing-outofstate"> (Out of State)</span>')}):$("[data-locate=city]").each(function(i){$(this).text(locate.mdiCity)}),$("[data-locate=zip]").each(function(i){$(this).text(locate.mdiZip)}),$("[data-locate=lat]").each(function(i){$(this).text(locate.deviceLat)}),$("[data-locate=lng]").each(function(i){$(this).text(locate.deviceLng)}),$("[data-locate=latlng]").each(function(i){var locateOut=locate.deviceLat+","+locate.deviceLng;$(this).text(locateOut)}),$("[data-locate=all]").each(function(i){var locateOut=locate.deviceLat+","+locate.deviceLng+","+locate.mdiCity;$(this).text(locateOut)}),locate.closeSettings(),locate.reloadapps()),"loading"==type&&$("[data-locate=city], [data-locate=zip],  [data-locate=lat], [data-locate=lng], [data-locate=latlng], [data-locate=all]").each(function(i){$(this).empty().text("Loading...")}),"error"==type&&$("[data-locate=city], [data-locate=zip], [data-locate=lat], [data-locate=lng], [data-locate=latlng], [data-locate=all]").each(function(i){$(this).empty().text("Error")})},locate.closeSettings=function(){$("nav#main-menu").removeClass("settingsOpen"),$("nav#main-menu #settings").removeClass("open").removeClass("location"),locate.mdiManualUpdateData.val("").blur()},locate.consoleOut=function(){},locate.setStoreLocation=function(type){"success"==type&&(sessionStorage.setItem("mdiCity",locate.mdiCity),sessionStorage.setItem("mdiZip",locate.mdiZip),sessionStorage.setItem("deviceLat",locate.deviceLat),sessionStorage.setItem("deviceLng",locate.deviceLng),sessionStorage.setItem("isOOS",locate.isOOS)),"error"==type&&(locate.mdiCity="Salt Lake City",locate.mdiZip="84111",locate.deviceLat="40.756",locate.deviceLng="-111.883",sessionStorage.setItem("mdiCity",locate.mdiCity),sessionStorage.setItem("mdiZip",locate.mdiZip),sessionStorage.setItem("deviceLat",locate.deviceLat),sessionStorage.setItem("deviceLng",locate.deviceLng))},locate.clearLocations=function(){sessionStorage.removeItem("mdiCity"),sessionStorage.removeItem("mdiZip"),sessionStorage.removeItem("deviceLat"),sessionStorage.removeItem("deviceLng"),sessionStorage.removeItem("isOOS"),locate.mdiCity="",locate.mdiZip="",locate.deviceLat="",locate.deviceLng="",locate.isStored=!1},locate.updateLocation=function(type){locate.clearLocations(),locate.isDefault=!1,"man"==type?locate.getLocation("man"):locate.getLocation(),locate.status="reload"},locate.reloadapps=function(){$("*").hasClass("mIndex")&&mdi&&mdi.initialize(),$("*").hasClass("aggregator")&&agg&&agg.initialize(),$("*").hasClass("pmn")&&pmn&&pmn.initialize(),$("*").hasClass("featuredVideo")&&yt&&yt.initialize(),$("[data-whatsnew]")&&whatsnew&&whatsnew.initialize(),$("[data-whatsnew]")&&whatsnew&&whatsnew.initialize(),$("*").hasClass("mdi-map")&&mdimap&&mdimap.init()},$(function(){locate.init(),locate.mdiUpdateBtn.click(function(e){locate.updateLocation(),e.preventDefault()}),locate.mdiManualUpdateBtn.click(function(e){locate.mdiManualData=$(this).prev(".check-in-mdata"),locate.mdiManualData=locate.mdiManualData.val(),locate.updateLocation("man"),e.preventDefault()}),locate.mdiManualUpdateData.keypress(function(e){13==e.which&&(locate.mdiManualData=$(this).val(),locate.updateLocation("man"))})});var whatsnew={URL:"/whatsnew/rss.xml",initialize:function(){$("[data-whatsnew]").each(function(i){var args={};args.container=$(this),args.cat=args.container.data("whatsnew"),args.limit=args.container.data("limit"),args.limit=args.limit-1,args.type=args.container.data("type"),args.keyword=args.container.data("keyword"),args.html="",whatsnew.query(args)})},query:function(args){$.ajax({type:"GET",url:whatsnew.URL,contentType:"text/xml",data:{category:args.cat},dataType:"xml",error:function(req,status,errorThrown){featureHeadline.html("error loading feed")},success:function(xml,status){"featured"==args.type?whatsnew.build_featured(xml,args):whatsnew.build_list(xml,args)}})},build_featured:function(xml,args){$(xml).find("item").each(function(i){if($(this).find("enclosure").attr("url")){var title=$(this).find("title").text(),url=$(this).find("link").text(),desc=$(this).find("description").text(),photo=$(this).find("enclosure").attr("url");return photo=photo.replace(/^http:\/\//i,"https://"),args.html+='<a href="'+url+'" style="background-image: url('+photo+');">',args.html+="<h5>",args.html+=title,args.html+="</h5>",args.html+='<p class="synopsis">'+desc+"</p>",args.html+="</a>",!1}}),whatsnew.output(args)},build_list:function(xml,args){$(xml).find("item").each(function(i){if(!$(this).find("enclosure").text()){var title=$(this).find("title").text(),url=$(this).find("link").text();$(this).find("guid").text(),$(this).find("description").text(),$(this).find("category").text();if(args.html+='<li><a href="'+url+'">'+title+"</a></li>",i>=args.limit)return!1}}),whatsnew.output(args)},output:function(args){args.container.html(args.html),"featured"!=args.type&&args.container.append('<a class="more" href="/whatsnew.html?type='+args.cat+'">Read More News Stories</a>')}};$(function(){});var mdi={url:"/masterindex/search.json",allcats:"2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,52,54,57,58,59,60,61,63,65,67",alltypes:"2,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,22,23,24,25,28,29,30,32,33,34,35,36,37,38,42,43,44,45,46,47,48,49,50",runcount:0,initialize:function(){$(".mIndex").each(function(index){var args={};if(args.mdiContainer=$(this),args.category=args.mdiContainer.data("category"),args.keyword=args.mdiContainer.data("keyword"),args.type=args.mdiContainer.data("type"),args.locate=args.mdiContainer.data("locate"),args.lat=args.mdiContainer.data("lat"),args.lng=args.mdiContainer.data("lng"),args.radius=args.mdiContainer.data("radius"),args.govclass=args.mdiContainer.data("govclass"),args.format=args.mdiContainer.data("format"),args.counter=args.mdiContainer.data("counter"),args.limit=args.mdiContainer.data("limit"),args.more=args.mdiContainer.data("getmore"),args.content=args.mdiContainer.data("content"),args.counterHTML="",args.getmoreHTML="",args.HTML="","all"==args.category&&(args.category=mdi.allcats),"all"==args.type&&(args.type=mdi.alltypes),void 0===args.limit&&(args.mindexLimit="5"),"device"===args.locate){var latlng=mdi.checkLocate(args);args.lat=latlng[0],args.lng=latlng[1]}"auto-city"===args.keyword?args.keyword=locate.mdiCity:"manual-city"===args.keyword&&(args.locate=args.locate.replace(/\+/g," "),args.keyword=args.locate),mdi.getdata(args)})},checkLocate:function(args){if(""!==locate.deviceLat)return[locate.deviceLat,locate.deviceLng];setTimeout(function(){mdi.checkLocate(args)},250)},getdata:function(args){mdi.runcount=mdi.runcount+1,$.getJSON(mdi.url,{categoryIds:args.category,keyword:args.keyword,typeIds:args.type,latitude:args.lat,longitude:args.lng,radius:args.radius,governmentClass:args.govclass,limit:args.limit},function(data){"trending"===args.format?args.HTML=mdi.buildTrending(data):"optionlist"===args.format?args.HTML=mdi.buildOptionslist(data):"utahcities"===args.format?args.HTML=mdi.buildCitiesList(data):args.HTML=mdi.build(data),!0===args.counter&&(args.counterHTML=mdi.buildCounter(data)),isFinite(args.more)&&""!=args.more&&(args.getmoreHTML=mdi.buildMore(data,args.more)),"count"===args.format?mdi.outputResultCount(data,args):"countup"===args.format?mdi.outputResultCountUp(data,args):"background"===args.format?mdi.outputBackground(data,args):mdi.output(data,args)})},build:function(data){var outputHTML="";return $.each(data.results,function(i,result){var schemaItemScope="",schemaApplicationCategory="",schemaOperatingSystem="";"Application"!==result.type&&"Search"!==result.type||(schemaItemScope="https://schema.org/WebApplication",schemaApplicationCategory="Form",schemaOperatingSystem="any"),"City"===result.type&&(schemaItemScope="https://schema.org/City"),outputClasses="item "+result.type+" "+result.governmentClass,result.imageName&&(outputClasses+=" hasimage"),outputHTML+='<li itemscope itemtype="'+schemaItemScope+'" class="'+outputClasses+'">',result.url&&(outputHTML+='<a itemprop="url" href="'+result.url+'">'),schemaApplicationCategory&&(outputHTML+='<meta itemprop="applicationCategory" content="'+schemaApplicationCategory+'">'),schemaOperatingSystem&&(outputHTML+='<meta itemprop="operatingSystem" content="'+schemaOperatingSystem+'">'),result.name&&(outputHTML+='<h4 itemprop="name" class="title">'+result.name+"</h4>"),result.agencies[0]&&(outputHTML+='<span itemprop="provider" class="agency">'+result.agencies[0]+"</span>"),result.imageName&&(outputHTML+='<img itemprop="image" src="/masterindex/index-images/'+result.imageName+'" title="'+result.name+'" alt="'+result.name+'" />'),result.description&&(outputHTML+='<span itemprop="description" class="description">'+result.description+"</span>"),result.url&&(outputHTML+='<span class="urltext">'+result.url+"</span>"),result.url&&(outputHTML+="</a>"),outputHTML+="</li>"}),outputHTML},buildTrending:function(data){var outputHTML="";return $.each(data.results,function(i,result){outputHTML+='<li class="item '+result.type+'">',result.url&&(outputHTML+='<a href="'+result.url+'" target="none">'),outputHTML+=result.description,result.url&&(outputHTML+="</a>"),outputHTML+="</li>"}),outputHTML},buildOptionslist:function(data){var outputHTML="";return $.each(data.results,function(i,result){outputHTML+='<option value="'+result.name+'">'}),outputHTML},buildCitiesList:function(data){var outputHTML="";return $.each(data.results,function(i,result){var urlfix=result.name.replace(/\s+/g,"+");outputHTML+='<li class="item '+result.type+'">',outputHTML+='<a href="/city/city.html?view='+urlfix+'">',outputHTML+=result.name,outputHTML+="</a>",outputHTML+="</li>"}),outputHTML},buildCounter:function(data){return'<div class="totalCount">Results: '+data.results.length+" of "+data.totalCount+"</div>"},buildMore:function(data,count){var resultLength=data.results.length,resultCount=data.totalCount;if(resultLength<resultCount)return'<a class="mdi-getmore" href="#" data-getmore="'+count+'"><em>'+resultLength+" of "+resultCount+"</em> - Load More </a>"},outputBackground:function(data,args){var resultCount=data.totalCount,background=data.results[0].imageName;0!=resultCount&&background&&(background="/masterindex/index-images/"+background,$(args.mdiContainer).css("background-image",'url("'+background+'")'))},outputResultCount:function(data,args){$(args.mdiContainer).append('<span class="count">'+data.totalCount+"</span>")},outputResultCountUp:function(data,args){var outputHTML="";args.content&&(outputHTML+='<span class="data-content">'+args.content+"</span>"),outputHTML+='<span class="count">0</span>',$(args.mdiContainer).html(outputHTML);var totalhalf=data.totalCount/2;$(args.mdiContainer).find(".count").html(totalhalf),function countthis(){var counterSpan=$(args.mdiContainer).find(".count"),current=parseInt(counterSpan.html(),10),countClose=data.totalCount-9;counterSpan.html(++current),current>countClose&&current<data.totalCount?setTimeout(function(){countthis()},400):current<data.totalCount&&setTimeout(function(){countthis()},.01)}()},output:function(data,args){var outputHTML="";args.format||(args.format="default"),args.counterHTML&&(outputHTML+=args.counterHTML),"optionlist"===args.format?outputHTML+=args.HTML:args.HTML?(args.content&&(outputHTML+='<span class="data-content">'+args.content+"</span>"),outputHTML+='<ul class="MDI-Results '+args.format+'">',outputHTML+=args.HTML,outputHTML+="</ul>",args.getmoreHTML&&(outputHTML+=args.getmoreHTML)):args.HTML||(outputHTML+="No Results Found"),$(args.mdiContainer).html(outputHTML)},ff:{}};mdi.ff.search=$("#mindexsearch"),mdi.ff.searchBtn=$("#mindexSearchBtn"),mdi.ff.category=$("#mindexfilterCategory"),mdi.ff.categoryBtn=$(".mindexFilterCatBtn"),mdi.ff.typeBtn=$(".mindexFilterTypeBtn"),mdi.ff.type=$("#mindexfilterType"),mdi.ff.moreBtn=$(".mdi-getmore"),mdi.ff.results=$(".mIndex.mdiSearchResults"),mdi.ff.resetBtn=$("#mindexResetBtn"),mdi.ff.keyword="",mdi.ff.newCategory="",mdi.ff.newType="",mdi.ff.newGovClass="",mdi.ff.search.keypress(function(e){13==e.which&&mdi.ff.update()}),mdi.ff.searchBtn.click(function(e){mdi.ff.update(),e.preventDefault()}),mdi.ff.category.change(function(){mdi.ff.update()}),mdi.ff.categoryBtn.click(function(){var thisCat=$(this).val();mdi.ff.category.val(thisCat),mdi.ff.update()}),mdi.ff.typeBtn.click(function(){var thisType=$(this).val();mdi.ff.category.val(""),mdi.ff.type.val(thisType),mdi.ff.update()}),mdi.ff.type.change(function(){mdi.ff.update()}),mdi.ff.resetBtn.click(function(e){mdi.ff.resetMDI(),e.preventDefault()}),$("body").on("click",".mdi-getmore",function(e){var count=$(this).data("getmore"),curr=$(this).parent(".mIndex").data("limit"),thismdi=$(this).parent(".mIndex");mdi.ff.getmore(thismdi,curr,count),e.preventDefault()}),mdi.ff.initialize=function(){mdi.ff.resets()},mdi.ff.resets=function(){mdi.ff.search.val(""),mdi.ff.category.val(""),mdi.ff.type.val("")},mdi.ff.update=function(update){mdi.ff.keyword=mdi.ff.search.val(),mdi.ff.keyword?mdi.ff.results.data("keyword",mdi.ff.keyword):mdi.ff.results.removeData("keyword"),mdi.ff.newCategory=mdi.ff.category.val(),mdi.ff.newCategory?mdi.ff.results.data("category",mdi.ff.newCategory):mdi.ff.results.removeData("category"),mdi.ff.newType=mdi.ff.type.val(),mdi.ff.newType?mdi.ff.results.data("type",mdi.ff.newType):mdi.ff.results.removeData("type"),"gcfed"==update?mdi.ff.newGovClass="FEDERAL":"gcstate"==update?mdi.ff.newGovClass="STATE":"gclocal"==update?mdi.ff.newGovClass="LOCAL":"gcall"==update&&(mdi.ff.newGovClass=""),mdi.ff.newGovClass?mdi.ff.results.data("govclass",mdi.ff.newGovClass):mdi.ff.results.removeData("govclass"),mdi.initialize()},mdi.ff.resetMDI=function(){var resetKeyword=mdi.ff.resetBtn.data("keyword"),resetCategory=mdi.ff.resetBtn.data("category"),resetType=mdi.ff.resetBtn.data("type"),resetGovclass=mdi.ff.resetBtn.data("govclass");null!=resetKeyword?mdi.ff.results.data("keyword",resetKeyword):(mdi.ff.search.val(""),mdi.ff.results.removeData("keyword")),null!=resetCategory?mdi.ff.results.data("category",resetCategory):(mdi.ff.category.val(mdi.ff.CategoryAll),mdi.ff.results.removeData("category")),null!=resetType?mdi.ff.results.data("type",resetType):(mdi.ff.type.val(mdi.ff.TypeAll),mdi.ff.results.removeData("type")),null!=resetGovclass?mdi.ff.results.data("govclass",resetGovclass):mdi.ff.results.removeData("govclass"),mdi.initialize()},mdi.ff.getmore=function(thismdi,curr,count){count+=curr,thismdi.data("limit",count),mdi.initialize()},mdi.auto={},mdi.auto.catops="",mdi.auto.typeops="",mdi.auto.cats=mdi.ff.category.data("autopopulate"),mdi.auto.types=mdi.ff.type.data("autopopulate"),mdi.auto.populate=function(){"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="'+mdi.allcats+'">All Categories</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="2">Agriculture and Food Production</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="54,4">Business</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="52">Citizen</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="59">Community</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="6">Communications</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="8,57,58">Education</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="10">Energy and Utilities</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="12">Environmental Protection</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="14">Government</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="60">Legislature</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="16">Health</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="61">Hospitals and Medical Care</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="18">History and Culture</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="20">Housing and Community Development</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="22">Human Services and Social Programs</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="24">Industry and Technology</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="26">Jobs, Employment, and Occupations</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="28">Laws and Regulations</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="30">Legal Services and Courts</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="32">Natural Resources</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="34">Public Safety and Corrections</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="36">Recreation and Tourism</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="38">Taxes and Government Revenue</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="40">Transportation and Motor Vehicles</option>'),"all"==mdi.auto.cats&&(mdi.auto.catops+='<option value="42">Voting and Elections</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="'+mdi.alltypes+'">All Types</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="2">Online Application</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="3">Notification Service</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="5">Website</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="6">Wiki</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="7">Blog</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="8,9,10,11">Widget</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="13">Mobile Apps</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="14">Tablet App</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="15">Data</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="16">XML</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="17">CSV</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="18">KMZ</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="19">SHP</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="20">RSS Feed</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="22">GooglePlus</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="23">Twitter</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="24">Facebook</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="25">Media</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="28">Audio Podcast</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="29">Video Podcast</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="30">Slideshare</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="32">GIS Map</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="33">ESRI Map</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="34">YouTube</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="35">Data Viewer</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="36">iPhone App</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="37">Android App</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="38">Blackberry App</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="42">Flickr</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="43">Instagram</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="44">Pinterest</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="45">iPad App</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="46">Scribd</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="47">Soundcloud</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="48">Search Tool</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="49">Form</option>'),"all"==mdi.auto.types&&(mdi.auto.typeops+='<option value="50">Offline Form</option>'),void 0!=mdi.auto.cats&&""!=mdi.auto.cats&&mdi.ff.category.html(mdi.auto.catops),void 0!=mdi.auto.types&&""!=mdi.auto.types&&mdi.ff.type.html(mdi.auto.typeops)},$(function(){$("*").hasClass("mIndex")&&mdi.ff.initialize(),$("select").data("autopopulate")&&mdi.auto.populate(),$(".type-filters button").click(function(){var govclass=$(this).data("update");mdi.ff.update(govclass)})});var agg={caleventsURL:"/aggregator/calendarEvents.json",twitteruserURL:"/aggregator/tweetsForUser.json",twitterlistURL:"/aggregator/tweetsForList.json",findLegislatorsURL:"/aggregator/findLegislators.json",getJobsURL:"/aggregator/findJobs.json"};agg.legislatorsearch=$("form.legislatorSearch"),agg.initialize=function(){$(".aggregator").each(function(index){var args={};args.container=$(this),args.type=args.container.data("type"),args.user=args.container.data("user"),args.owner=args.container.data("owner"),args.list=args.container.data("list"),args.keyword=args.container.data("keyword"),args.address=String(args.container.data("address")),args.limit=args.container.data("limit"),args.lat=locate.deviceLat,args.lng=locate.deviceLng,args.html="","twitter-user"==args.type&&agg.get_twitteruser(args),"twitter-list"==args.type&&agg.get_twitterlist(args),"calendar"==args.type&&agg.get_calendar(args),"legislator"==args.type&&agg.init_legislators(args),"jobs"==args.type&&agg.get_jobs(args)})},agg.get_twitteruser=function(args){$.getJSON(agg.twitteruserURL,{username:args.user,count:args.limit},function(data){$.each(data,function(i,result){result.url&&(args.html+='<a class="twitter-link" href="'+result.url+'">'),args.html+='<p class="twitter-post">'+result.post+"</p>",result.url&&(args.html+="</a>")}),agg.output(args)})},agg.get_twitterlist=function(args){$.getJSON(agg.twitterlistURL,{listOwner:args.owner,slug:args.list,count:args.limit},function(data){$.each(data,function(i,result){result.url&&(args.html+='<a class="twitter-link" href="'+result.url+'">'),args.html+='<p class="twitter-post"><span class="twitter-author">'+result.author+":</span> "+result.post+"</p>",result.url&&(args.html+="</a>")}),agg.output(args)})},agg.get_jobs=function(args){args.zip=locate.mdiZip||"84111",$.getJSON(agg.getJobsURL,{zip:args.zip,count:args.limit},function(data){for(var i=0;i<args.limit;i++)data[i].url&&(args.html+='<a class="job-listing" href="'+data[i].url+'">'),args.html+='<span class="jobTitle">'+data[i].title+"</span>",data[i].postingDate&&(args.html+='<span class="jobPostedDate">'+data[i].postingDate+"</span>"),data[i].city&&(args.html+='<span class="jobCity">'+data[i].city+"</span>"),data[i].url&&(args.html+="</a>");agg.output(args)})},agg.get_calendar=function(args){$.getJSON(agg.caleventsURL,{calendarId:args.user,keyword:args.keyword,count:args.limit},function(data){$.each(data.items,function(i,calevent){var calstartdate=calevent.start.date,calenddate=calevent.end.date,calstartdatespl=calstartdate.split("-");calstartdatespl=calstartdatespl[1]+"/"+calstartdatespl[2]+"/"+calstartdatespl[0];var calenddatespl=calenddate.split("-");calenddatespl=calenddatespl[1]+"/"+calenddatespl[2]+"/"+calenddatespl[0],calevent.location&&(args.html+='<a class="calendar-link" href="'+calevent.location+'">'),args.html+='<h3 class="calendar-summary">'+calevent.summary+"</h3>",args.html+='<p class="calendar-description">'+calevent.description+"</p>",calevent.start.date==calevent.end.date?args.html+='<p class="calendar-dates">'+calstartdatespl+"</p>":args.html+='<p class="calendar-dates">'+calstartdatespl+" - "+calenddatespl+"</p>",calevent.location&&(args.html+="</a>")}),agg.output(args)})},agg.init_legislators=function(args){agg.legiscoords=localStorage.getItem("legiscoords"),agg.legiscoords?(agg.legiscoords=agg.legiscoords.split(","),args.lat=agg.legiscoords[0],args.lng=agg.legiscoords[1],agg.checkLocate(args)):"auto"==args.address?agg.checkLocate(args):""!=args.address?agg.get_legislatorsgoogle(args):agg.update_legislators_stat("ready")},agg.checkLocate=function(args){""!==locate.deviceLat?(args.Lat=locate.deviceLat,args.Lng=locate.deviceLng,agg.get_legislators(args)):setTimeout(function(){agg.checkLocate(args)},250)},agg.get_legislatorsgoogle=function(args){(new google.maps.Geocoder).geocode({address:args.address},function(results,status){if(status==google.maps.GeocoderStatus.OK){args.lat=results[0].geometry.location.lat(),args.lng=results[0].geometry.location.lng();var storelatlng=args.lat+","+args.lng;localStorage.setItem("legiscoords",storelatlng),agg.get_legislators(args)}else localStorage.removeItem("legiscoords")})},agg.get_legislators=function(args){$.getJSON(agg.findLegislatorsURL,{lat:args.lat,lng:args.lng},function(data){$.each(data,function(i,result){var distclass=result.district.split(" ");result.imageUrl.match("^http://")&&(result.imageUrl=result.imageUrl.replace("http://","https://")),args.html+='<a href="'+result.url+'" class="legislator-link '+result.party+" "+distclass[0]+'" style="background-image: url('+result.imageUrl+');">',args.html+='<span class="legislator-name">'+result.name+"</span>",args.html+='<span class="legislator-party">'+result.party+"</span>",args.html+='<span class="legislator-district">'+result.district+"</span>",args.html+="</a>"}),agg.output(args),agg.update_legislators_stat("submitted")})},agg.update_legislators=function(cont){var newaddress=cont.children("input"),oldaddress=$(".aggregator[data-address]");newaddress=newaddress.val(),oldaddress.data("address",newaddress),agg.initialize()},agg.update_legislators_stat=function(status){agg.legislatorsearch&&"submitted"==status?agg.legislatorsearch.addClass("submitted"):agg.legislatorsearch&&"ready"==status&&agg.legislatorsearch.removeClass("submitted")},agg.output=function(args){$(args.container).html(args.html)},$(function(){$("form.legislatorSearch").submit(function(event){cont=$(this);var leginput=cont.children("input");""!=leginput.val()?(agg.legiscoords="",localStorage.removeItem("legiscoords"),agg.update_legislators(cont)):(agg.legiscoords="",localStorage.removeItem("legiscoords"),$(".aggregator").data("address","auto"),agg.initialize()),event.preventDefault()})});var yt={initialize:function(){$(".featuredVideo").each(function(index){var args={};args.ytcontainer=$(this),args.videoURL="https://www.googleapis.com/youtube/v3/playlistItems",args.part="snippet",args.id=args.ytcontainer.data("ytid"),args.apikey="AIzaSyDSUZ02zh9A4w5neKOb__JElQJRmtnPAUM",args.results=1,args.linkURL="https://www.youtube.com/watch?v=",args.ytHTML="",yt.query(args)})},query:function(args){$.getJSON(args.videoURL,{part:args.part,playlistId:args.id,maxResults:args.results,key:args.apikey},function(data){yt.build(data,args)})},build:function(data,args){$.each(data.items,function(i,item){args.ytHTML+='<iframe width="320" height="227" src="//www.youtube.com/embed/'+item.snippet.resourceId.videoId+'?html5=1&rel=0" frameborder="0" allowfullscreen></iframe>'}),yt.output(args)},output:function(args){args.ytcontainer.html(args.ytHTML)}};$(function(){});var pmn={URL:"/pmn/getUpcomingNotices.json",initialize:function(){$(".pmn").each(function(index){var args={};args.pmncontainer=$(this),args.type=args.pmncontainer.data("pmn"),args.limit=args.pmncontainer.data("limit"),args.html="","auto"==args.type?args.city=locate.mdiCity||"Salt Lake City":args.city="Salt Lake City",pmn.getdata(args)})},getdata:function(args){$.get(pmn.URL,{zipOrCity:args.city,listSize:args.limit}).done(function(data){pmn.parse(data.noticeDtoList,args)})},parse:function(data,args){if(data.length>=1){for(var meeting in pmndata={},pmndata.count=0,data)pmndata.count++,pmEntry=data[meeting],pmndata.title=pmEntry.meetingTitle,pmndata.noticeId=pmEntry.noticeId,pmndata.startTime=pmEntry.meetingStartTime,pmndata.meetingLocation=pmEntry.meetingAddress1,pmndata.meetingLocation2=pmEntry.meetingAddress2,pmndata.meetingZip=pmEntry.meetingZip,pmndata.meetingCity=pmEntry.meetingCity,pmndata.agenda=pmEntry.meetingAgenda,pmndata.governmentType=pmEntry.governmentType,pmndata.meetingLink="https://www.utah.gov/pmn/sitemap/notice/"+pmndata.noticeId+".html",pmndata.mtime=pmndata.startTime.replace(/,/g,"").split(" "),pmndata.monthText=pmndata.mtime[0],pmndata.day=pmndata.mtime[1],pmndata.meetingTime=pmndata.mtime[4]+" "+pmndata.mtime[5],pmndata.title&&pmndata.count<=args.limit&&(args.html+='<li class="meetingRow">',args.html+='<a href="'+pmndata.meetingLink+'" target="_blank">',args.html+='<span class="meetingTitle">'+pmndata.title+"</span>",args.html+='<span class="meetingDate">',args.html+='<span class="month">'+pmndata.monthText+"</span>",args.html+='<span class="day">'+pmndata.day+"</span>",args.html+="</span>",args.html+='<span class="meetingTime">'+pmndata.meetingTime+"</span>",args.html+='<span class="meetingLocation">'+pmndata.meetingLocation,pmndata.meetingLocation2&&(args.html+=" "+pmndata.meetingLocation2),args.html+=" "+pmndata.meetingCity+" "+pmndata.meetingZip+"</span>",args.html+="</a>",args.html+="</li>");pmn.output(args)}else args.html="<p>Sorry, there are currently no meetings found in your area.</p>",pmn.output(args)},output:function(args){args.pmncontainer.html("<ul>"+args.html+"</ul>")}};$(function(){});var mdimap={map:""};mdimap.utcenter=new google.maps.LatLng(39.5,-111.2),mdimap.utzoom=6,mdimap.recenter="",mdimap.rezoom=13,mdimap.marker="",mdimap.iconsizes=[],mdimap.iconsizes.size=new google.maps.Size(27,40),mdimap.iconsizes.origin=new google.maps.Point(0,0),mdimap.iconsizes.anchor=new google.maps.Point(0,40),mdimap.icons={city:{url:"/images/icons/map/city.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},citybuildings:{url:"/images/icons/map/cityBuilding.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},countybuildings:{url:"/images/icons/map/countyBuilding.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},driverlicense:{url:"/images/icons/map/driverLicense.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},library:{url:"/images/icons/map/library.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},park:{url:"/images/icons/map/park.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},school:{url:"/images/icons/map/school.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},schooldistricts:{url:"/images/icons/map/schoolDistrict.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},stateparks:{url:"/images/icons/map/statePark.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor},zipcode:{url:"/images/icons/map/zip.svg",scaledSize:mdimap.iconsizes.size,origin:mdimap.iconsizes.origin,anchor:mdimap.iconsizes.anchor}},mdimap.init=function(){$(".mdi-map").each(function(index){var args={};args.mapcontainer=$(this),args.category=args.mapcontainer.data("category"),args.keyword=args.mapcontainer.data("keyword"),args.type=args.mapcontainer.data("type"),args.lat=args.mapcontainer.data("lat"),args.lng=args.mapcontainer.data("lng"),args.radius=args.mapcontainer.data("radius"),args.govclass=args.mapcontainer.data("govclass"),args.limit=args.mapcontainer.data("limit"),args.showlist=args.mapcontainer.data("list"),args.markers=[],args.locations={},args.listhtml="",args.firstlatlng="",mdimap.init_map(args)})},mdimap.init_map=function(args){var myOptions={zoom:mdimap.utzoom,center:mdimap.utcenter,mapTypeControl:!1,panControl:!1,streetViewControl:!1,zoomControl:!0,scrollwheel:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_CENTER}};mdimap.map=new google.maps.Map(args.mapcontainer[0],myOptions),args.lat&&args.lng?mdimap.get_markerdata(args):mdimap.check_locate(args)},mdimap.check_locate=function(args){""!==locate.deviceLat?(args.lat=locate.deviceLat,args.lng=locate.deviceLng,mdimap.get_markerdata(args)):setTimeout(function(){mdimap.check_locate(args)},250)},mdimap.get_markerdata=function(args){$.getJSON(mdi.url,{categoryIds:args.category,keyword:args.keyword,typeIds:args.type,latitude:args.lat,longitude:args.lng,radius:args.radius,governmentClass:args.govclass,limit:args.limit},function(data){mdimap.build_markers(data,args),args.showlist&&mdimap.build_list(data,args)})},mdimap.build_markers=function(data,args){args.firstlatlng=data.results[0].location.latitude+","+data.results[0].location.longitude,$.each(data.results,function(i,result){var name=result.name,description=result.description,governmentclass=result.governmentclass,type=mdimap.convert_type(result.type),distance=result.location.distanceInMiles,url=result.url,latlng=new google.maps.LatLng(parseFloat(result.location.latitude),parseFloat(result.location.longitude)),store={latlng:latlng,name:name,url:url,description:description,governmentclass:governmentclass,distance:distance,type:type},latlngHash=latlng.lat().toFixed(6)+""+latlng.lng().toFixed(6);latlngHash=latlngHash.replace(".","").replace(".","").replace("-",""),null==args.locations[latlngHash]&&(args.locations[latlngHash]=[]),args.locations[latlngHash].push(store)}),mdimap.create_markers(args),mdimap.mod_map.center(args.firstlatlng),mdimap.mod_map.zoom()},mdimap.create_markers=function(args){var infowindow=new google.maps.InfoWindow({maxWidth:400});for(var latlngHash in args.locations){var store=args.locations[latlngHash][0],marker=new google.maps.Marker({position:store.latlng,map:mdimap.map,icon:mdimap.icons[store.type],title:store.name,animation:google.maps.Animation.DROP});args.markers.push(marker),marker.html='<h4 class="marker-title">'+store.name+"</h4>",store.governmentclass&&(marker.html+='<div class="marker-governmentclass"> '+store.governmentclass+"</div>"),store.description&&(marker.html+='<div class="marker-description">'+store.description+"</div>"),store.url&&(marker.html+='<a class="marker-link" href="'+store.url+'" target="_blank">Website</a>'),google.maps.event.addListener(marker,"click",function(){infowindow.setContent(this.html),infowindow.open(mdimap.map,this)})}},mdimap.build_list=function(data,args){$(".marker-list").remove(),args.listhtml="",args.listhtml+='<div class="marker-list">',data.totalCount>12&&args.limit>12&&(args.listhtml+='<div class="marker-search">',args.listhtml+='<input type="text" class="search" title="Map Marker Search" placeholder="Quick Search" />',args.listhtml+="</div>"),args.listhtml+="<ul>",$.each(data.results,function(i,result){args.listhtml+='<li class="'+mdimap.convert_type(result.type)+'">',args.listhtml+='<a href="#" class="markeritem" data-latlng="'+result.location.latitude+","+result.location.longitude+'">'+result.name+"</a>",args.listhtml+="</li>"}),args.listhtml+="</ul>",args.listhtml+="</div>",args.mapcontainer.after(args.listhtml),mdimap.mod_map.offset()},mdimap.convert_type=function(type){return{None:"none",City:"city","City Building":"citybuildings","County Building":"countybuildings","Driver License":"driverlicense",Library:"library",Park:"park",School:"school","School District":"schooldistricts","State Parks":"stateparks","Zip Code":"zipcode"}[type]},mdimap.mod_map={center:function(latlng){latlng=latlng.split(","),mdimap.recenter=new google.maps.LatLng(parseFloat(latlng[0]),parseFloat(latlng[1])),mdimap.map.panTo(mdimap.recenter)},zoom:function(level){level?mdimap.map.setZoom(level):mdimap.map.setZoom(mdimap.rezoom)},offset:function(x,y){x&&y?mdimap.map.panBy(x,y):mdimap.map.panBy(180,0)}},mdimap.action_listclick=function(latlng,container){mdimap.mod_map.center(latlng),mdimap.mod_map.zoom(17),mdimap.mod_map.offset()},$(function(){$("body").on("click",".markeritem",function(event){var latlng=$(this).data("latlng"),container=$(this).parent(".locationAwareMap").find(".mdi-map");mdimap.action_listclick(latlng,container),event.preventDefault()}),$("body").on("keyup",".marker-search .search",function(event){var $rows=$(".marker-list li"),val=$.trim($(this).val()).replace(/ +/g," ").toLowerCase();$rows.hide().filter(function(){return~$(this).text().replace(/\s+/g," ").toLowerCase().indexOf(val)}).show(),$(this).val()||$rows.show()})}),isPage=function(pageTitle){if((pageTitle+=" | Utah.gov: The Official Website of the State of Utah")===document.getElementsByTagName("title")[0].innerText)return pageTitle};var search={},currentPage="",searchTerm="",linkClicked="";function getData(){if(isPage("Search Results")){var urlSearch=window.location.href.split("=");searchTerm=urlSearch[1],currentPage=window.location.href.split("?")[0]}else searchTerm=$("#search-input").val(),currentPage=window.location.href}function sendData(data){$.ajax({type:"POST",dataType:"json",url:"https://kdv4er8slc.execute-api.us-east-2.amazonaws.com/dev/dataUtah",headers:{"Content-Type":"application/json"},data:JSON.stringify(data),success:function(msg){},error:function(err){}}).done(function(msg){window.location=data.link}).fail(function(jqXHR,textStatus){window.location=data.link})}$(document).on("click","#results .item a",function(e){e.preventDefault(),getData(),search.data={link:$(this).attr("href"),page:currentPage,searchTerm:searchTerm,tab:$("#searchTabs").find(".active").parent().attr("id")},sendData(search.data)}),$(document).on("click","#searchTabs li",function(e){$("#formsResults iframe").on("load",function(){$("#formsResults iframe").contents().find("a.gs-title").on("click",function(e){e.preventDefault(),getData(),search.data={link:$(this).attr("href"),page:currentPage,searchTerm:searchTerm,tab:$("#searchTabs").find(".active").parent().attr("id")},sendData(search.data)})}),$("#googleResults iframe").on("load",function(){$("#googleResults iframe").contents().find("a.gs-title").on("click",function(e){e.preventDefault(),getData(),search.data={link:$(this).attr("href"),page:currentPage,searchTerm:searchTerm,tab:$("#searchTabs").find(".active").parent().attr("id")},sendData(search.data)})})});
//# sourceMappingURL=services.min.js.map
